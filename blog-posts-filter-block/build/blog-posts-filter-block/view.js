(()=>{"use strict";var e={338(e,t,s){var a=s(795);t.H=a.createRoot,a.hydrateRoot},795(e){e.exports=window.ReactDOM}},t={};function s(a){var r=t[a];if(void 0!==r)return r.exports;var n=t[a]={exports:{}};return e[a](n,n.exports,s),n.exports}s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},s.d=(e,t)=>{for(var a in t)s.o(t,a)&&!s.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var a=s(338);const r=window.wp.element,n=window.wp.apiFetch;var l=s.n(n);const i=window.wp.components,c=window.wp.htmlEntities,o=window.ReactJSXRuntime,d=(document?.documentElement?.lang||"en").split("-")[0],m=({perPage:e,page:t,cat:s})=>{const a=new URLSearchParams;return a.set("per_page",String(e)),a.set("page",String(t)),a.set("_embed","1"),a.set("orderby","date"),a.set("order","desc"),s&&Number(s)>0&&a.set("categories",String(s)),d&&a.set("lang",d),`/wp/v2/posts?${a.toString()}`};function p({perPage:e=6,columns:t=3}){const[s,a]=(0,r.useState)([]),[n,p]=(0,r.useState)(0),[u,h]=(0,r.useState)(!0),[g,x]=(0,r.useState)(1),[f,v]=(0,r.useState)([]),[j,b]=(0,r.useState)(1),[w,y]=(0,r.useState)(!0),[N,k]=(0,r.useState)("");(0,r.useEffect)(()=>{let e=!1;return h(!0),l()({path:`/wp/v2/categories?per_page=100&hide_empty=1&lang=${d}`}).then(t=>{if(e)return;const s=Array.isArray(t)?t:[];a(s.filter(e=>Number(e?.count||0)>0))}).catch(t=>{e||k(t?.message||"Failed to load categories")}).finally(()=>{e||h(!1)}),()=>{e=!0}},[]),(0,r.useEffect)(()=>{let t=!1;return y(!0),k(""),l()({path:m({perPage:e,page:g,cat:n}),parse:!1}).then(async e=>{const s=await e.json(),a=Number(e.headers.get("X-WP-TotalPages")||"1");t||(v(Array.isArray(s)?s:[]),b(a||1))}).catch(e=>{t||k(e?.message||"Failed to load posts")}).finally(()=>{t||y(!1)}),()=>{t=!0}},[e,g,n]);const S=(0,r.useMemo)(()=>({display:"grid",gridTemplateColumns:`repeat(${t}, minmax(0, 1fr))`,gap:"1.5rem"}),[t]),_=(0,r.useMemo)(()=>Array.from({length:j},(e,t)=>t+1),[j]),P=e=>{p(e),x(1)};return(0,o.jsxs)("div",{className:"hide-wp-block-classes alignwide mb-3",children:[u?(0,o.jsx)(i.Spinner,{}):s.length>0?(0,o.jsxs)("ul",{className:"nav nav-pills blog-filters mb-3",children:[(0,o.jsx)("li",{className:"nav-item",children:(0,o.jsx)("a",{className:"nav-link "+(0===n?"active":""),onClick:()=>P(0),children:"View all"})}),s.map(e=>(0,o.jsx)("li",{className:"nav-item",children:(0,o.jsx)("a",{className:"nav-link "+(n===e.id?"active":""),onClick:()=>P(e.id),children:(0,c.decodeEntities)(e.name)})},e.id))]}):null,N&&(0,o.jsx)("div",{className:"bpffb-error alert alert-danger",children:N}),w?(0,o.jsx)(i.Spinner,{}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{style:S,children:f.map(e=>{const t=(e=>{const t=e?._embedded?.["wp:featuredmedia"]?.[0];return{url:t?.source_url||"",alt:t?.alt_text||""}})(e),s=(a=e,(a?._embedded?.["wp:term"]?.[0]||[]).map(e=>({id:e.id,name:e.name,link:e.link})));var a;const r=((e="",t=200)=>{const s=e.replace(/<[^>]*>/g," ").replace(/\s+/g," ").trim(),a=s?s.split(" ").length:0;return`${Math.max(1,Math.round(a/t))} min`})(e?.content?.rendered||"");return(0,o.jsxs)("article",{className:"h-100 d-flex flex-column position-relative border-0",children:[t.url&&(0,o.jsx)("img",{className:"mb-3 rounded",src:t.url,alt:t.alt,style:{width:"100%",aspectRatio:"4/3",objectFit:"cover"},loading:"lazy"}),(0,o.jsxs)("div",{className:"d-flex gap-2 align-items-center mb-2 flex-wrap",children:[s.map(e=>(0,o.jsx)("a",{href:e.link,className:"badge bg-primary-subtle border border-primary-subtle text-primary-emphasis text-decoration-none border border-primary",children:(0,c.decodeEntities)(e.name)},e.id)),(0,o.jsxs)("span",{className:"small text-muted",children:[r," read"]})]}),(0,o.jsx)("h3",{className:"h5 mb-2",dangerouslySetInnerHTML:{__html:e.title.rendered}}),(0,o.jsxs)("div",{className:"flex-grow-1 d-flex flex-column justify-content-between",children:[(0,o.jsx)("div",{className:"mb-0 text-muted",dangerouslySetInnerHTML:{__html:e.excerpt.rendered}}),(0,o.jsxs)("a",{className:"stretched-link icon-link",href:e.link,children:["Read more",(0,o.jsx)("svg",{class:"icon",children:(0,o.jsx)("use",{href:"/wp-content/themes/kp-theme/assets/fonts/icon.svg#chevron-right"})})]})]})]},e.id)})}),j>1&&(0,o.jsxs)("div",{className:"pagination justify-content-center mt-4 d-flex gap-2 align-items-center",children:[g>1&&(0,o.jsxs)("a",{className:"prev-next icon-link",onClick:()=>x(e=>Math.max(1,e-1)),children:["Previous",(0,o.jsx)("svg",{class:"icon",children:(0,o.jsx)("use",{href:"/wp-content/themes/kp-theme/assets/fonts/icon.svg#chevron-left"})})]}),(0,o.jsx)("div",{className:"d-flex gap-1",children:_.map(e=>(0,o.jsx)("a",{className:"page-numbers "+(e===g?"current":""),onClick:()=>x(e),"aria-current":e===g?"page":void 0,children:e},e))}),g<j&&(0,o.jsxs)("a",{className:"prev-next icon-link",onClick:()=>x(e=>Math.min(j,e+1)),children:["Next",(0,o.jsx)("svg",{class:"icon",children:(0,o.jsx)("use",{href:"/wp-content/themes/kp-theme/assets/fonts/icon.svg#chevron-right"})})]})]})]})]})}document.querySelectorAll(".bpffb-root").forEach(e=>{const t=Number(e.dataset.perPage||"6"),s=Number(e.dataset.columns||"3");(0,a.H)(e).render((0,o.jsx)(p,{perPage:t,columns:s}))})})();