(()=>{"use strict";var e={338(e,a,s){var t=s(795);a.H=t.createRoot,t.hydrateRoot},795(e){e.exports=window.ReactDOM}},a={};function s(t){var l=a[t];if(void 0!==l)return l.exports;var r=a[t]={exports:{}};return e[t](r,r.exports,s),r.exports}s.n=e=>{var a=e&&e.__esModule?()=>e.default:()=>e;return s.d(a,{a}),a},s.d=(e,a)=>{for(var t in a)s.o(a,t)&&!s.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:a[t]})},s.o=(e,a)=>Object.prototype.hasOwnProperty.call(e,a);var t=s(338);const l=window.wp.element,r=window.wp.apiFetch;var n=s.n(r);const c=window.wp.htmlEntities,i=window.ReactJSXRuntime;function o({posts:e=[],gridStyle:a}){const s=(0,l.useMemo)(()=>({display:"grid",gridTemplateColumns:"repeat(3, minmax(0, 1fr))",gap:"1.5rem"}),[]),t=a||s;return(0,i.jsx)("div",{style:t,children:e.map(e=>{const a=(e=>{const a=e?._embedded?.["wp:featuredmedia"]?.[0];return{url:a?.source_url||"",alt:a?.alt_text||""}})(e),s=(t=e,(t?._embedded?.["wp:term"]?.[0]||[]).map(e=>({id:e.id,name:e.name,link:e.link})));var t;const l=((e="",a=200)=>{const s=e.replace(/<[^>]*>/g," ").replace(/\s+/g," ").trim(),t=s?s.split(" ").length:0;return`${Math.max(1,Math.round(t/a))} min`})(e?.content?.rendered||"");return(0,i.jsxs)("article",{className:"h-100 d-flex flex-column position-relative border-0",children:[a.url&&(0,i.jsx)("img",{className:"mb-3 rounded",src:a.url,alt:a.alt,style:{width:"100%",aspectRatio:"4/3",objectFit:"cover"},loading:"lazy"}),(0,i.jsxs)("div",{className:"d-flex gap-2 align-items-center mb-2 flex-wrap",children:[s.map(e=>(0,i.jsx)("a",{href:e.link,className:"badge bg-primary-subtle border border-primary-subtle text-primary-emphasis text-decoration-none border border-primary",children:(0,c.decodeEntities)(e.name)},e.id)),(0,i.jsxs)("span",{className:"small text-muted",children:[l," read"]})]}),(0,i.jsx)("h3",{className:"h5 mb-2",dangerouslySetInnerHTML:{__html:e.title.rendered}}),(0,i.jsxs)("div",{className:"flex-grow-1 d-flex flex-column justify-content-between",children:[(0,i.jsx)("div",{className:"mb-0 text-muted",dangerouslySetInnerHTML:{__html:e.excerpt.rendered}}),(0,i.jsxs)("a",{className:"stretched-link icon-link",href:e.link,children:["Read more",(0,i.jsx)("svg",{className:"icon",children:(0,i.jsx)("use",{href:"/wp-content/themes/kp-theme/assets/fonts/icon.svg#chevron-right"})})]})]})]},e.id)})})}function d({page:e,totalPages:a,onPrev:s,onNext:t,onGoTo:r}){const n=(0,l.useMemo)(()=>Array.from({length:a},(e,a)=>a+1),[a]);return!a||a<=1?null:(0,i.jsxs)("div",{className:"pagination justify-content-center mt-4 d-flex gap-2 align-items-center",children:[e>1&&(0,i.jsxs)("a",{className:"prev-next icon-link",onClick:s,children:["Previous",(0,i.jsx)("svg",{className:"icon",children:(0,i.jsx)("use",{href:"/wp-content/themes/kp-theme/assets/fonts/icon.svg#chevron-left"})})]}),(0,i.jsx)("div",{className:"d-flex gap-1",children:n.map(a=>(0,i.jsx)("a",{className:"page-numbers "+(a===e?"current":""),onClick:()=>r(a),"aria-current":a===e?"page":void 0,children:a},a))}),e<a&&(0,i.jsxs)("a",{className:"prev-next icon-link",onClick:t,children:["Next",(0,i.jsx)("svg",{className:"icon",children:(0,i.jsx)("use",{href:"/wp-content/themes/kp-theme/assets/fonts/icon.svg#chevron-right"})})]})]})}function m(){const e=(0,l.useMemo)(()=>({display:"grid",gridTemplateColumns:"repeat(3, minmax(0, 1fr))",gap:"1.5rem"}),[3]);return(0,i.jsx)("div",{style:e,children:Array.from({length:6}).map((e,a)=>(0,i.jsx)("article",{children:(0,i.jsxs)("div",{className:"card h-100 border-0",style:{backgroundColor:"red"},"aria-hidden":"true",children:[(0,i.jsx)("span",{className:"card-img-top placeholder",style:{aspectRatio:"4 / 3",display:"block"}}),(0,i.jsxs)("div",{className:"card-body d-flex flex-column",children:[(0,i.jsx)("h5",{className:"card-title placeholder-glow",children:(0,i.jsx)("span",{className:"placeholder col-7"})}),(0,i.jsxs)("div",{className:"d-flex gap-2 align-items-center mb-3 flex-wrap",children:[(0,i.jsx)("span",{className:"placeholder-glow",children:(0,i.jsx)("span",{className:"placeholder rounded-pill",style:{width:"4.5rem"},children:" "})}),(0,i.jsx)("span",{className:"placeholder-glow",children:(0,i.jsx)("span",{className:"placeholder rounded-pill",style:{width:"4.5rem"},children:" "})}),(0,i.jsx)("span",{className:"ms-auto placeholder-glow",children:(0,i.jsx)("span",{className:"placeholder rounded-pill",style:{width:"3.5rem"},children:" "})})]}),(0,i.jsxs)("p",{className:"card-text placeholder-glow flex-grow-1",children:[(0,i.jsx)("span",{className:"placeholder col-12"}),(0,i.jsx)("span",{className:"placeholder col-12"}),(0,i.jsx)("span",{className:"placeholder col-10"}),(0,i.jsx)("span",{className:"placeholder col-8"})]}),(0,i.jsx)("a",{href:"#",tabIndex:"-1",className:"btn btn-primary disabled placeholder col-6","aria-disabled":"true"})]})]})},a))})}function p({loading:e,cats:a,activeCat:s,onSelect:t,skeletonCount:l=6}){return e?(0,i.jsx)("ul",{className:"nav nav-pills blog-filters mb-3",children:Array.from({length:l}).map((e,a)=>(0,i.jsx)("li",{className:"nav-item",children:(0,i.jsx)("span",{className:"nav-link filter-tab disabled placeholder-glow",children:(0,i.jsx)("span",{className:"placeholder col-8",children:" "})})},a))}):a&&0!==a.length?(0,i.jsxs)("ul",{className:"nav nav-pills blog-filters mb-3",children:[(0,i.jsx)("li",{className:"nav-item",children:(0,i.jsx)("button",{className:"nav-link filter-tab "+(0===s?"active":""),onClick:()=>t(0),type:"button",children:"View all"})}),a.map(e=>(0,i.jsx)("li",{className:"nav-item",children:(0,i.jsx)("button",{className:"nav-link filter-tab "+(s===e.id?"active":""),onClick:()=>t(e.id),type:"button",children:(0,c.decodeEntities)(e.name)})},e.id))]}):null}const h=({perPage:e,page:a,cat:s})=>{const t=new URLSearchParams;return t.set("per_page",String(e)),t.set("page",String(a)),t.set("_embed","1"),t.set("orderby","date"),t.set("order","desc"),s&&Number(s)>0&&t.set("categories",String(s)),`/wp/v2/posts?${t.toString()}`};function x({perPage:e=6,columns:a=3}){const[s,t]=(0,l.useState)([]),[r,c]=(0,l.useState)(0),[x,u]=(0,l.useState)(!0),[g,j]=(0,l.useState)(1),[f,b]=(0,l.useState)([]),[v,N]=(0,l.useState)(1),[y,w]=(0,l.useState)(!0),[k,S]=(0,l.useState)("");(0,l.useEffect)(()=>{let e=!1;return u(!0),n()({path:"/wp/v2/categories?per_page=100&hide_empty=1"}).then(a=>{e||t(Array.isArray(a)?a:[])}).catch(a=>{e||S(a?.message||"Failed to load categories")}).finally(()=>{e||u(!1)}),()=>{e=!0}},[]),(0,l.useEffect)(()=>{let a=!1;return w(!0),S(""),n()({path:h({perPage:e,page:g,cat:r}),parse:!1}).then(async e=>{const s=await e.json(),t=Number(e.headers.get("X-WP-TotalPages")||"1");a||(b(Array.isArray(s)?s:[]),N(t||1))}).catch(e=>{a||S(e?.message||"Failed to load posts")}).finally(()=>{a||w(!1)}),()=>{a=!0}},[e,g,r]);const P=(0,l.useMemo)(()=>({display:"grid",gridTemplateColumns:`repeat(${a}, minmax(0, 1fr))`,gap:"1.5rem"}),[a]),_=x||y;return(0,i.jsxs)("div",{className:"hide-wp-block-classes alignwide mb-3",children:[!x&&s.length>1&&(0,i.jsx)("div",{className:"mb-3",children:(0,i.jsx)(p,{cats:s,activeCat:r,onSelect:e=>{c(e),j(1)}})}),k&&(0,i.jsx)("div",{className:"bpffb-error alert alert-danger",children:k}),_?(0,i.jsx)(m,{}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o,{posts:f,gridStyle:P}),(0,i.jsx)(d,{page:g,totalPages:v,onPrev:()=>j(e=>Math.max(1,e-1)),onNext:()=>j(e=>Math.min(v,e+1)),onGoTo:e=>j(e)})]})]})}document.querySelectorAll(".bpffb-root").forEach(e=>{const a=Number(e.dataset.perPage||"6"),s=Number(e.dataset.columns||"3");(0,t.H)(e).render((0,i.jsx)(x,{perPage:a,columns:s}))})})();